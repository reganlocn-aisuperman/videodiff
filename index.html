<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VideoDiff Pro v1.38</title>
    <style>
        :root { 
            --primary: #3b82f6; --bg: #0f172a; --text: #f8fafc; --border: #334155; --panel: #1e293b; 
        }
        [data-theme="light"] { 
            --bg: #f1f5f9; --text: #1e293b; --border: #cbd5e1; --panel: #ffffff; 
        }

        body { font-family: system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        .top-nav { width: 850px; display: flex; justify-content: space-between; margin-bottom: 12px; }
        .lang-group { display: flex; gap: 5px; }
        .icon-btn { background: var(--panel); border: 1px solid var(--border); color: var(--text); padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
        .active { background: var(--primary); color: white; }

        .demo-bar { 
            width: 830px; display: flex; gap: 10px; margin-bottom: 15px; padding: 10px; 
            border: 1px dashed var(--border); border-radius: 6px;
            background: rgba(30, 41, 59, 0.3);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .loading-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 850px; margin-bottom: 15px; }
        .source-box { display: flex; flex-direction: column; gap: 5px; }
        
        /* 统一视频象形图标 */
        .source-box b { font-size: 13px; color: var(--primary); display: flex; align-items: center; gap: 6px; }
        .source-box b svg { width: 15px; height: 15px; fill: currentColor; }

        .input-row { display: flex; gap: 5px; }
        input[type="text"] { background: var(--panel); border: 1px solid var(--border); color: var(--text); padding: 4px 8px; border-radius: 4px; flex: 1; font-size: 12px; }
        
        /* 调小按钮文字 */
        .btn-sm { background: var(--primary); border: none; color: white; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-orange { background: #f59e0b; }
        
        .stats { display: flex; gap: 8px; margin-top: 2px; }
        .tag { font-size: 10px; color: var(--primary); background: rgba(59, 130, 246, 0.1); padding: 1px 5px; border-radius: 3px; }

        .viewer-wrap { width: 850px; height: 480px; background: #000; border: 1px solid var(--border); position: relative; display: flex; flex-direction: column; resize: both; overflow: hidden; }
        .viewer-container { position: relative; flex: 1; overflow: hidden; cursor: col-resize; }
        video { position: absolute; width: 100%; height: 100%; object-fit: contain; }
        #wrapperA { position: absolute; top:0; left:0; width: 50%; height: 100%; overflow: hidden; border-right: 2px solid var(--primary); z-index: 10; pointer-events: none; }
        #handle { position: absolute; top: 0; left: 50%; width: 2px; height: 100%; background: var(--primary); transform: translateX(-50%); z-index: 20; pointer-events: none; }
        
        .controls { background: var(--panel); height: 44px; display: flex; align-items: center; padding: 0 15px; gap: 12px; border-top: 1px solid var(--border); }
        .ctrl-btn { background: none; border: none; color: var(--text); cursor: pointer; display: flex; align-items: center; padding: 0; }
        .ctrl-btn svg { width: 18px; height: 18px; fill: currentColor; }
        #prog { flex: 1; accent-color: var(--primary); cursor: pointer; }
        .vol-wrap { display: flex; align-items: center; gap: 6px; }
        #vol { width: 60px; accent-color: var(--primary); cursor: pointer; }
    </style>
</head>
<body>

<div class="top-nav">
    <div class="lang-group">
        <button class="icon-btn active">EN</button>
        <button class="icon-btn">中</button>
        <button class="icon-btn" onclick="toggleTheme()">◑</button>
    </div>
    <div style="display:flex; gap:8px;">
        <button class="btn-sm" style="background:#ef4444" onclick="location.reload()">RESET</button>
        <button class="btn-sm" style="background:#10b981">SHARE URL</button>
    </div>
</div>

<div class="demo-bar">
    <button class="icon-btn" onclick="loadDemo(1)" style="display:flex; align-items:center; gap:6px;">
        <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h10v2H7zm0 4h10v2H7zm0-8h10v2H7z"/></svg>
        Demo 1 (Ads)
    </button>
    <button class="icon-btn" style="opacity:0.4; display:flex; align-items:center; gap:6px;">
        <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
        Demo 2 (Soon)
    </button>
</div>

<div class="loading-grid">
    <div class="source-box">
        <b><svg viewBox="0 0 24 24"><path d="M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1zm5 4l-3 3 3 3V10z"/></svg> Base (Original)</b>
        <input type="file" id="fA" onchange="loadSource('A','f')" style="font-size:11px">
        <div class="input-row">
            <input type="text" id="uA" placeholder="URL">
            <button class="btn-sm" onclick="loadSource('A','u')">LOAD</button>
        </div>
        <div id="iA" class="stats"></div>
    </div>
    <div class="source-box">
        <b><svg viewBox="0 0 24 24"><path d="M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1zm5 4l-3 3 3 3V10z"/></svg> Comparison (Upscaled)</b>
        <input type="file" id="fB" onchange="loadSource('B','f')" style="font-size:11px">
        <div class="input-row">
            <input type="text" id="uB" placeholder="URL">
            <button class="btn-sm" onclick="loadSource('B','u')">LOAD</button>
            <button class="btn-sm btn-orange" onclick="loadBoth()">SYNC</button>
        </div>
        <div id="iB" class="stats"></div>
    </div>
</div>

<div class="viewer-wrap" id="player">
    <div class="viewer-container" id="box">
        <video id="vB" loop playsinline></video>
        <div id="wrapperA"><video id="vA" loop muted playsinline></video></div>
        <div id="handle"></div>
    </div>
    <div class="controls">
        <button class="ctrl-btn" onclick="play()"><svg id="p-ic" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
        <input type="range" id="prog" min="0" max="100" value="0" step="0.1">
        <span id="time" style="font-size:11px; min-width:30px;">0.0s</span>
        <div class="vol-wrap">
            <div class="ctrl-btn"><svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg></div>
            <input type="range" id="vol" min="0" max="1" step="0.1" value="1">
        </div>
        <button class="ctrl-btn" onclick="full()"><svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm12-7h-3V5h5v5h-2V7zM5 10V5h5v2H7v3H5zm14 4v3h-3v2h5v-5h-2z"/></svg></button>
    </div>
</div>

<script>
    function toggleTheme() {
        const body = document.body;
        body.setAttribute('data-theme', body.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
    }

    const vA=document.getElementById('vA'), vB=document.getElementById('vB'), box=document.getElementById('box'), 
          wrapA=document.getElementById('wrapperA'), han=document.getElementById('handle'), prog=document.getElementById('prog');

    let drag = false;
    const move = (e) => {
        let r = box.getBoundingClientRect();
        let x = ((e.clientX - r.left) / r.width) * 100;
        x = Math.max(0, Math.min(100, x));
        han.style.left = wrapA.style.width = x + '%';
    };
    box.onmousedown = () => drag = true;
    window.onmousemove = (e) => drag && move(e);
    window.onmouseup = () => drag = false;

    function loadSource(t, m) {
        const v = t==='A'?vA:vB, f=document.getElementById('f'+t).files[0], u=document.getElementById('u'+t).value;
        v.src = m==='f'?URL.createObjectURL(f):u;
        v.onloadedmetadata = () => { document.getElementById('i'+t).innerHTML = `<span class="tag">Res: ${v.videoWidth}x${v.videoHeight}</span><span class="tag">Dur: ${v.duration.toFixed(1)}s</span>`; };
    }
    function loadBoth() { loadSource('A','u'); loadSource('B','u'); }
    function play() { vB.paused ? vB.play() : vB.pause(); }
    vB.onplay = () => { vA.play(); document.getElementById('p-ic').innerHTML='<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; };
    vB.onpause = () => { vA.pause(); document.getElementById('p-ic').innerHTML='<path d="M8 5v14l11-7z"/>'; };
    vB.ontimeupdate = () => { 
        prog.value = (vB.currentTime/vB.duration)*100 || 0; 
        document.getElementById('time').innerText = vB.currentTime.toFixed(1)+'s';
        if(Math.abs(vA.currentTime-vB.currentTime)>0.1) vA.currentTime=vB.currentTime;
    };
    prog.oninput = () => vB.currentTime = vA.currentTime = (prog.value/100)*vB.duration;
    document.getElementById('vol').oninput = (e) => vA.volume = vB.volume = e.target.value;
    
    function full() {
        const p = document.getElementById('player');
        if (!document.fullscreenElement) {
            if (p.requestFullscreen) p.requestFullscreen();
            else if (p.webkitRequestFullscreen) p.webkitRequestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    function loadDemo(id) {
        if(id===1) { document.getElementById('uA').value="http://reganaigc.cloudpeek.xyz/20260121-141149.mp4"; document.getElementById('uB').value="http://reganaigc.cloudpeek.xyz/oEI4FLCS04wcfqRxQpxcnjQ1weA4DQe7VEJc6N"; loadBoth(); }
    }
    new ResizeObserver(() => vA.style.width = vB.offsetWidth + 'px').observe(box);
</script>
</body>
</html>
